# --- Configuration ---
REPO_URL="https://github.com/nitolkinetik/ta-automation-reports.git"
REPO_DIR="ta-automation-reports"
COMMIT_MESSAGE="docs: Add project README"

# --- Script Steps ---

# Clean up previous directory if it exists, to ensure a fresh start
echo "--- Cleaning up old directory if it exists... ---"
rm -rf $REPO_DIR

# 1. Clone the repository from GitHub
echo "--- Cloning repository... ---"
git clone $REPO_URL

# 2. Change into the repository's directory
cd $REPO_DIR

# 3. Create the README.md file with the full content
echo "--- Creating README.md file... ---"
cat << EOF > README.md
# üìä TA Automation Test Reports

![Playwright](https://img.shields.io/badge/Playwright-v1.52.0-2EAD33?style=for-the-badge&logo=playwright)
![GitHub Pages](https://img.shields.io/badge/Hosted%20on-GitHub%20Pages-181717?style=for-the-badge&logo=github)
![License](https://img.shields.io/badge/License-MIT-blue.svg?style=for-the-badge)

This repository serves as a centralized archive for all test automation execution reports generated by the Kinetik Care TA Automation project. Each report is a static HTML file generated by Playwright, providing detailed insights into a specific test run.

---

## üöÄ Purpose

The goal of this repository is to provide a persistent, shareable, and historical view of our test suite's performance over time. Instead of reports being temporary artifacts in a CI/CD pipeline, they are committed here and hosted via GitHub Pages, making them accessible to all stakeholders.

## üõ†Ô∏è Technology Stack

This reporting solution is powered by a combination of modern automation and hosting tools:

* **[Playwright](https://playwright.dev/):** The core automation framework used for writing and executing the tests. It generates the detailed HTML reports.
* **[Bitbucket Pipelines](https://bitbucket.org/product/features/pipelines):** The CI/CD service that runs the automated tests on a schedule or manually.
* **[GitHub Pages](https://pages.github.com/):** The static site hosting service that makes the generated reports publicly or privately available.

## ‚öôÔ∏è How It Works

The reporting process is fully automated through our Bitbucket pipeline:

1.  **Test Execution:** A pipeline is triggered in Bitbucket, either manually or on a schedule.
2.  **Report Generation:** The pipeline runs the full suite of Playwright tests. Upon completion, Playwright generates a self-contained HTML report (\`playwright-report\`).
3.  **Checkout and Copy:** A subsequent step in the pipeline securely checks out this \`ta-automation-reports\` repository.
4.  **Directory Creation:** It creates a new directory named with a unique timestamp and the target environment (e.g., \`reports/20250708_142013_STAGE/\`).
5.  **Commit and Push:** The pipeline copies the \`playwright-report\` contents into the new directory, commits the files, and pushes them to the \`main\` branch of this repository.
6.  **Deployment:** GitHub Pages automatically detects the new commit and deploys the changes, making the new report instantly available online.
7.  **Notification:** A final pipeline step sends a notification to our team's Slack channel with a summary of the results and a direct link to the newly published report.

## üîó Accessing the Reports

All historical test reports are organized by date, time, and environment.

* **Main Index:** [**https://nitolkinetik.github.io/ta-automation-reports/**](https://nitolkinetik.github.io/ta-automation-reports/)
* **Directory Structure:** All reports are stored under the \`/reports/\` directory.
* **Example Direct Link:** A link to a specific report will look like this:
    \`https://nitolkinetik.github.io/ta-automation-reports/reports/20250708_142013_STAGE/index.html\`

---
*This is an automated repository. Commits are made by the Bitbucket Pipelines CI/CD process.*
EOF

# 4. Add, Commit, and Push the new README file to GitHub
echo "--- Uploading README.md to GitHub... ---"
git add README.md
git commit -m "$COMMIT_MESSAGE"
git push origin main

echo "--- All done! README.md has been successfully added to your repository. ---"
